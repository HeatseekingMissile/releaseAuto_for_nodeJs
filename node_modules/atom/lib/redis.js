var redis = require('redis');

/**
 * Default Redis connection details.
 */

var default_port = 6379
  , default_host = '127.0.0.1'

/**
 * Create a redis client.
 *
 * TODO: Examples
 *
 * @param {Object|String} config
 * @return {RedisClient} client
 * @api public
 */

module.exports = function (config) {
    var client;
    if (typeof config === 'object') {
        //TODO: Check if instance of redis client
        if (config.client) {
            client = config.client;
        } else {
            client = config.client = redis.createClient(
                config.port || default_port
              , config.host || default_host
            );
        }
    } else {
        var host = config.split(':')
          , port = host.length === 2 ? host[1] : default_port;
        client = redis.createClient(port, host);
    }
    return client;
};

