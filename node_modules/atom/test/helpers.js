var assert = require('assert')
  , helpers = {};

function merge(obj) {
    for (var i in obj) {
        helpers[i] = obj[i];
    }
}

require('../').helpers({
    helpers: merge
  , dynamicHelpers: merge
});

describe('helpers', function () {
    it('should output static html blocks', function (done) {
        assert.equal('<script type="text/javascript" src="jquery.js"></script>\n', helpers.static('jquery.js'));
        assert.equal('<link rel="shortcut icon" href="/favicon.ico" />\n', helpers.static('/favicon.ico'));
        assert.equal('<link rel="stylesheet" href="lol.css">\n', helpers.static('lol.css'));
        done();
    });
    it('should output gravatar urls', function (done) {
        assert.equal('http://www.gravatar.com/avatar/b48def645758b95537d4424c84d1a9ff?d=mm', helpers.gravatar('foo@example.com'));
        assert.equal('http://www.gravatar.com/avatar/b48def645758b95537d4424c84d1a9ff?d=mm&s=80', helpers.gravatar('FOO@example.com', 80));
        assert.equal('https://secure.gravatar.com/b48def645758b95537d4424c84d1a9ff?d=mm&s=100', helpers.gravatar('foo@example.com', 100, true));
        done();
    });
});

